!function(){var t,e,r,n,a,i,o,s,l,u,c,h,p,d,f,g,v,m,b=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},w=[].slice,x={}.hasOwnProperty,y=function(t,e){return function(){return t.apply(e,arguments)}};t=jQuery,r=function(t){var e,r,n,a;for(t+="",r=t.split("."),n=r[0],a=r.length>1?"."+r[1]:"",e=/(\d+)(\d{3})/;e.test(n);)n=n.replace(e,"$1,$2");return n+a},d=function(t,e){return null==t&&(t=3),null==e&&(e=1),function(n){return 0===n||isNaN(n)||!isFinite(n)?"":r((e*n).toFixed(t))}},n={sum:function(t,e){return null==t&&(t=3),null==e&&(e=1),function(r){var n;return n=r[0],function(){return{sum:0,push:function(t){return isNaN(parseFloat(t[n]))?void 0:this.sum+=parseFloat(t[n])},value:function(){return this.sum},format:d(t,e)}}}},average:function(t,e){return null==t&&(t=3),null==e&&(e=1),function(r){var n;return n=r[0],function(){return{sum:0,len:0,push:function(t){return isNaN(parseFloat(t[n]))?void 0:(this.sum+=parseFloat(t[n]),this.len++)},value:function(){return this.sum/this.len},format:d(t,e)}}}},sumOverSum:function(t,e){return null==t&&(t=3),null==e&&(e=1),function(r){var n,a;return a=r[0],n=r[1],function(){return{sumNum:0,sumDenom:0,push:function(t){return isNaN(parseFloat(t[a]))||(this.sumNum+=parseFloat(t[a])),isNaN(parseFloat(t[n]))?void 0:this.sumDenom+=parseFloat(t[n])},value:function(){return this.sumNum/this.sumDenom},format:d(t,e)}}}},sumOverSumBound80:function(t,e,r){return null==t&&(t=3),null==e&&(e=1),null==r&&(r=!0),function(n){var a,i;return i=n[0],a=n[1],function(){return{sumNum:0,sumDenom:0,push:function(t){return isNaN(parseFloat(t[i]))||(this.sumNum+=parseFloat(t[i])),isNaN(parseFloat(t[a]))?void 0:this.sumDenom+=parseFloat(t[a])},value:function(){var t;return t=r?1:-1,(.821187207574908/this.sumDenom+this.sumNum/this.sumDenom+1.2815515655446004*t*Math.sqrt(.410593603787454/(this.sumDenom*this.sumDenom)+this.sumNum*(1-this.sumNum/this.sumDenom)/(this.sumDenom*this.sumDenom)))/(1+1.642374415149816/this.sumDenom)},format:d(t,e)}}}}},a={count:function(){return function(){return{count:0,push:function(){return this.count++},value:function(){return this.count},format:d(0)}}},countUnique:function(t){var e;return e=t[0],function(){return{uniq:[],push:function(t){var r;return r=t[e],b.call(this.uniq,r)<0?this.uniq.push(t[e]):void 0},value:function(){return this.uniq.length},format:d(0)}}},listUnique:function(t){var e;return e=t[0],function(){return{uniq:[],push:function(t){var r;return r=t[e],b.call(this.uniq,r)<0?this.uniq.push(t[e]):void 0},value:function(){return this.uniq.join(", ")},format:function(t){return t}}}},intSum:n.sum(0),sum:n.sum(3),average:n.average(3),sumOverSum:n.sumOverSum(3),ub80:n.sumOverSumBound80(3,1,!0),lb80:n.sumOverSumBound80(3,1,!1)},g={},c={bin:function(t,e){var r;return r="string"==typeof t?function(e){return e[t]}:t,function(t){return""+(r(t)-r(t)%e)}}},p={current:null,ln:function(){var t,e,r,n;return null==p.current&&(t=window.navigator.userLanguage||window.navigator.language,p.current=p[t],null==p.current&&(e=t.split("-"),2===e.length&&(e[1]=e[1].toUpperCase()),p.current=null!=(r=null!=(n=p[e.join("-")])?n:p[e[0]])?r:p.en)),p.current},t:function(){var t,e,r,n;return r=arguments[0],t=2<=arguments.length?w.call(arguments,1):[],e=null!=(n=p.ln())?n[r]:void 0,null!=e?"[object Function]"===Object.prototype.toString.call(e)?e(t):e:r}},m=p.t,l={style:"jquery-ui",decorate:function(){var t,e,r,n,a,i,o;return e=arguments[0],n=arguments[1],t=3<=arguments.length?w.call(arguments,2):[],r=null!=(a=l["default"][n])?a.apply(e,t):void 0,null!=(i=l[l.style])?null!=(o=i[n])?o.apply(r||e,t):void 0:void 0}},f={},t.pivotUtilities={aggregatorTemplates:n,aggregators:a,renderers:g,derivers:c,i18n:p,decorators:l,plugins:f},u=function(t,e,r){var n,a,i;for(n in e)a=e[n],t[n]=null!=(i=a(t))?i:t[n];for(n in t)x.call(t,n)&&null==t[n]&&(t[n]=m("null"));return r(t)},h=function(e,r,n){var a,i,o,s,l,c,h,p,d,f,g,v;if(a=function(t){return u(t,r,n)},"[object Function]"===Object.prototype.toString.call(e))return e(a);if(t.isArray(e)){if(t.isArray(e[0])){g=[];for(o in e)if(x.call(e,o)&&(i=e[o],o>0)){c={},f=e[0];for(s in f)x.call(f,s)&&(l=f[s],c[l]=i[s]);g.push(a(c))}return g}for(v=[],p=0,d=e.length;d>p;p++)c=e[p],v.push(a(c));return v}return h=[],t("thead > tr > th",e).each(function(){return h.push(t(this).text())}),t("tbody > tr",e).each(function(){return c={},t("td",this).each(function(e){return c[h[e]]=t(this).text()}),a(c)})},s=function(t){var e;return e=[],h(t,{},function(t){return e.push(t)}),e},e=function(){function t(t,e,r){this.aggregator=t,this.colVars=e,this.rowVars=r,this.getAggregator=y(this.getAggregator,this),this.flattenKey=y(this.flattenKey,this),this.getRowKeys=y(this.getRowKeys,this),this.getColKeys=y(this.getColKeys,this),this.sortKeys=y(this.sortKeys,this),this.arrSort=y(this.arrSort,this),this.natSort=y(this.natSort,this),this.tree={},this.rowKeys=[],this.colKeys=[],this.flatRowKeys=[],this.flatColKeys=[],this.rowTotals={},this.colTotals={},this.allTotal=this.aggregator(),this.sorted=!1}return t.prototype.natSort=function(t,e){var r,n,a,i,o,s,l;if(s=/(\d+)|(\D+)/g,o=/\d/,l=/^0/,"number"==typeof t||"number"==typeof e)return isNaN(t)?1:isNaN(e)?-1:t-e;if(r=String(t).toLowerCase(),a=String(e).toLowerCase(),r===a)return 0;if(!o.test(r)||!o.test(a))return r>a?1:-1;for(r=r.match(s),a=a.match(s);r.length&&a.length;)if(n=r.shift(),i=a.shift(),n!==i)return o.test(n)&&o.test(i)?n.replace(l,".0")-i.replace(l,".0"):n>i?1:-1;return r.length-a.length},t.prototype.arrSort=function(t,e){return this.natSort(t.join(),e.join())},t.prototype.sortKeys=function(){return this.sorted||(this.rowKeys.sort(this.arrSort),this.colKeys.sort(this.arrSort)),this.sorted=!0},t.prototype.getColKeys=function(){return this.sortKeys(),this.colKeys},t.prototype.getRowKeys=function(){return this.sortKeys(),this.rowKeys},t.prototype.flattenKey=function(t){return t.join(String.fromCharCode(0))},t.prototype.processRow=function(t){var e,r,n,a,i;return e=function(){var e,r,n,a;for(n=this.colVars,a=[],e=0,r=n.length;r>e;e++)i=n[e],a.push(t[i]);return a}.call(this),a=function(){var e,r,n,a;for(n=this.rowVars,a=[],e=0,r=n.length;r>e;e++)i=n[e],a.push(t[i]);return a}.call(this),n=this.flattenKey(a),r=this.flattenKey(e),this.allTotal.push(t),0!==a.length&&(b.call(this.flatRowKeys,n)<0&&(this.rowKeys.push(a),this.flatRowKeys.push(n)),this.rowTotals[n]||(this.rowTotals[n]=this.aggregator()),this.rowTotals[n].push(t)),0!==e.length&&(b.call(this.flatColKeys,r)<0&&(this.colKeys.push(e),this.flatColKeys.push(r)),this.colTotals[r]||(this.colTotals[r]=this.aggregator()),this.colTotals[r].push(t)),0!==e.length&&0!==a.length?(n in this.tree||(this.tree[n]={}),r in this.tree[n]||(this.tree[n][r]=this.aggregator()),this.tree[n][r].push(t)):void 0},t.prototype.getAggregator=function(t,e){var r,n,a;return a=this.flattenKey(t),n=this.flattenKey(e),r=0===t.length&&0===e.length?this.allTotal:0===t.length?this.colTotals[n]:0===e.length?this.rowTotals[a]:this.tree[a][n],null!=r?r:{value:function(){return null},format:function(){return""}}},t}(),i=function(t,r,n,a,i,o){var s;return s=new e(a,r,n),h(t,o,function(t){return i(t)?s.processRow(t):void 0}),window.pivotData=s,s},v=function(t,e,r){var n,a,i,o,s,l;if(0!==e){for(a=!0,o=s=0;r>=0?r>=s:s>=r;o=r>=0?++s:--s)t[e-1][o]!==t[e][o]&&(a=!1);if(a)return-1}for(n=0;e+n<t.length;){for(i=!1,o=l=0;r>=0?r>=l:l>=r;o=r>=0?++l:--l)t[e][o]!==t[e+n][o]&&(i=!0);if(i)break;n++}return n},o=function(e){var r,n,a,i,o,s,u,c,h,p,d,f,g,b,w,y,A,C,T,S,N;o=e.colVars,f=e.rowVars,d=e.getRowKeys(),i=e.getColKeys(),h=t("<table class='pvtTable'>"),y=t("<thead>");for(u in o)if(x.call(o,u)){n=o[u],C=t("<tr>"),0===parseInt(u)&&0!==f.length&&C.append(t("<th>").attr("colspan",f.length).attr("rowspan",o.length)),C.append(t("<th class='pvtAxisLabel'>").text(n));for(s in i)x.call(i,s)&&(a=i[s],N=v(i,parseInt(s),parseInt(u)),-1!==N&&(w=t("<th class='pvtColLabel col"+s+"'>").text(a[u]).attr("colspan",N),parseInt(u)===o.length-1&&0!==f.length&&w.attr("rowspan",2),C.append(w)));0===parseInt(u)&&C.append(t("<th class='pvtTotalLabel'>").text(m("Totals")).attr("rowspan",o.length+(0===f.length?0:1))),y.append(C)}if(0!==f.length){C=t("<tr>");for(s in f)x.call(f,s)&&(c=f[s],C.append(t("<th class='pvtAxisLabel'>").text(c)));w=t("<th>"),0===o.length&&w.addClass("pvtTotalLabel").text(m("Totals")),C.append(w),y.append(C)}h.append(y),g=t("<tbody>");for(s in d)if(x.call(d,s)){p=d[s],C=t("<tr>");for(u in p)x.call(p,u)&&(T=p[u],N=v(d,parseInt(s),parseInt(u)),-1!==N&&(w=t("<th class='pvtRowLabel row"+s+"'>").text(T).attr("rowspan",N),parseInt(u)===f.length-1&&0!==o.length&&w.attr("colspan",2),C.append(w)));for(u in i)x.call(i,u)&&(a=i[u],r=e.getAggregator(p,a),S=r.value(),C.append(t("<td class='pvtVal row"+s+" col"+u+"'>").text(r.format(S)).data("value",S)));A=e.getAggregator(p,[]),S=A.value(),C.append(t("<td class='pvtTotal rowTotal row"+s+"'>").text(A.format(S)).data("value",S).data("for","row"+s)),g.append(C)}h.append(g),b=t("<tfoot>"),C=t("<tr>"),w=t("<th class='pvtTotalLabel'>").text(m("Totals")),w.attr("colspan",f.length+(0===o.length?0:1)),C.append(w);for(u in i)x.call(i,u)&&(a=i[u],A=e.getAggregator([],a),S=A.value(),C.append(t("<td class='pvtTotal colTotal col"+u+"'>").text(A.format(S)).data("value",S).data("for","col"+u)));return A=e.getAggregator([],[]),S=A.value(),C.append(t("<td class='pvtGrandTotal'>").text(A.format(S)).data("value",S)),h.append(b.append(C)),h.data("dimensions",[d.length,i.length]),l.decorate(h,"pivotTable"),h},t.fn.pivot=function(e,r){var n,s,l,u,c,h,p;n={cols:[],rows:[],filter:function(){return!0},aggregator:a.count(),derivedAttributes:{},renderer:function(t){return o(t)},decoratorStyle:"jquery-ui",plugins:{}},r=t.extend(n,r),t.pivotUtilities.decorators.style=r.decoratorStyle,l=i(e,r.cols,r.rows,r.aggregator,r.filter,r.derivedAttributes),this.html(u=r.renderer(l,this)),h=r.plugins,p=[];for(s in h)c=h[s],p.push(t.pivotUtilities.plugins[s](u,c));return p},t.fn.pivotUI=function(e,r){var n,i,o,u,c,p,d,f,v,m,w,y,A,C,T,S,N,k;u={derivedAttributes:{},aggregators:a,renderers:g,hiddenAxes:[],decoratorStyle:"jquery-ui",plugins:{},cols:[],rows:[],vals:[]},r=t.extend(u,r),t.pivotUtilities.decorators.style=r.decoratorStyle,d=function(){var a,i,o,s;return o={derivedAttributes:r.derivedAttributes,decoratorStyle:r.decoratorStyle,plugins:r.plugins},o.cols=[],o.rows=[],s=[],t("#rows .data-label").each(function(){return o.rows.push(t(this).data("name"))}),t("#cols .data-label").each(function(){return o.cols.push(t(this).data("name"))}),t("#vals .data-label").each(function(){return s.push(t(this).data("name"))}),o.aggregator=r.aggregators[n.val()](s),a=[],t("input.pvtFilter").not(":checked").each(function(){return a.push(t(this).data("filter"))}),o.filter=function(t){var e,r,n,i,o;for(n=0,i=a.length;i>n;n++)if(o=a[n],e=o[0],r=o[1],t[e]===r)return!1;return!0},0!==f.length&&(i=v.data("selected"),"None"!==i&&(o.renderer=r.renderers[i])),p.pivot(e,o)},e=s(e),m=function(){var t,r;t=e[0],r=[];for(c in t)x.call(t,c)&&r.push(c);return r}(),k=r.derivedAttributes;for(o in k)x.call(k,o)&&b.call(m,o)<0&&m.push(o);for(i={},S=0,N=m.length;N>S;S++)C=m[S],i[C]={};return h(e,r.derivedAttributes,function(t){var e,r,n;n=[];for(c in t)x.call(t,c)&&(e=t[c],null==e&&(e="null"),null==(r=i[c])[e]&&(r[e]=0),n.push(i[c][e]++));return n}),A=t("<table class='pvt-ui-table' cellpadding='5'>"),f=function(){var t,e;t=r.renderers,e=[];for(C in t)x.call(t,C)&&(T=t[C],e.push(C));return e}(),0!==f.length&&(f.unshift("None"),v=l.decorate(A,"createRendererSelector",f,d)),l.decorate(A,"createColList",m,r.hiddenAxes,i,d),w=t("<tr>"),n=l.decorate(w,"createAggregatorMenu",r.aggregators,d),w.append(t("<td id='vals' class='pvtAxisContainer pvtHorizList'>").css("text-align","center").append(n).append(t("<br>"))),w.append(t("<td id='cols' class='pvtAxisContainer pvtHorizList'>")),A.append(w),y=t("<tr>"),y.append(t("<td valign='top' id='rows' class='pvtAxisContainer'>")),p=t("<td valign='top'>"),y.append(p),A.append(y),l.decorate(A,"pivotUITable"),this.html(A),l.decorate(r,"initialUI"),t(".pvtAxisContainer").sortable({connectWith:".pvtAxisContainer",items:".data-label",handle:".handle"}).bind("sortstop",d),l.decorate(A,"afterCreated"),this},window.PivotTable=t.extend(t.pivotUtilities,{deriveAttributes:u,buildPivotData:i,buildPivotTable:o,forEachRow:h,PivotData:e})}.call(this),function(){var t,e,r;t=jQuery,r=window.PivotTable,e=r.decorators,e["default"]={pivotTable:function(){return t(".pvtVal, .pvtTotal",this).hover(function(){var e;return e="."+t.trim(t(this)[0].className.replace("pvtVal","")).split(" ").join(",."),t(".pvtTable").find(e).addClass("pvtVal-cross"),t(this).addClass("pvtVal-em")},function(){var e;return e="th ."+t.trim(t(this)[0].className.replace("pvtVal","")).split(" ").join(",."),t(".pvtTable").find(e).removeClass("pvtVal-cross"),t(this).removeClass("pvtVal-em")}),this}}}.call(this);var base64={};base64.PADCHAR="=",base64.ALPHA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",base64.makeDOMException=function(){try{return new DOMException(DOMException.INVALID_CHARACTER_ERR)}catch(t){var e=new Error("DOM Exception 5");return e.code=e.number=5,e.name=e.description="INVALID_CHARACTER_ERR",e.toString=function(){return"Error: "+e.name+": "+e.message},e}},base64.getbyte64=function(t,e){var r=base64.ALPHA.indexOf(t.charAt(e));if(-1===r)throw base64.makeDOMException();return r},base64.decode=function(t){t=""+t;var e,r,n,a=base64.getbyte64,i=t.length;if(0===i)return t;if(0!==i%4)throw base64.makeDOMException();e=0,t.charAt(i-1)===base64.PADCHAR&&(e=1,t.charAt(i-2)===base64.PADCHAR&&(e=2),i-=4);var o=[];for(r=0;i>r;r+=4)n=a(t,r)<<18|a(t,r+1)<<12|a(t,r+2)<<6|a(t,r+3),o.push(String.fromCharCode(n>>16,255&n>>8,255&n));switch(e){case 1:n=a(t,r)<<18|a(t,r+1)<<12|a(t,r+2)<<6,o.push(String.fromCharCode(n>>16,255&n>>8));break;case 2:n=a(t,r)<<18|a(t,r+1)<<12,o.push(String.fromCharCode(n>>16))}return o.join("")},base64.getbyte=function(t,e){var r=t.charCodeAt(e);if(r>255)throw base64.makeDOMException();return r},base64.encode=function(t){if(1!==arguments.length)throw new SyntaxError("Not enough arguments");var e,r,n=base64.PADCHAR,a=base64.ALPHA,i=base64.getbyte,o=[];t=""+t;var s=t.length-t.length%3;if(0===t.length)return t;for(e=0;s>e;e+=3)r=i(t,e)<<16|i(t,e+1)<<8|i(t,e+2),o.push(a.charAt(r>>18)),o.push(a.charAt(63&r>>12)),o.push(a.charAt(63&r>>6)),o.push(a.charAt(63&r));switch(t.length-s){case 1:r=i(t,e)<<16,o.push(a.charAt(r>>18)+a.charAt(63&r>>12)+n+n);break;case 2:r=i(t,e)<<16|i(t,e+1)<<8,o.push(a.charAt(r>>18)+a.charAt(63&r>>12)+a.charAt(63&r>>6)+n)}return o.join("")},function(){var t,e,r;t=jQuery,e=window.PivotTable,r=e.renderers,t.extend(r,{"Row Barchart":function(t){return e.buildPivotTable(t).barchart()},Heatmap:function(t){return e.buildPivotTable(t).heatmap()},"Row Heatmap":function(t){return e.buildPivotTable(t).heatmap("rowheatmap")},"Col Heatmap":function(t){return e.buildPivotTable(t).heatmap("colheatmap")}}),t.fn.heatmap=function(e){var r,n,a,i,o,s,l,u,c,h=this;switch(null==e&&(e="heatmap"),c=this.data("dimensions"),s=c[0],o=c[1],r=function(t,e,r){var n;return n=function(){switch(t){case"red":return function(t){return"ff"+t+t};case"green":return function(t){return""+t+"ff"+t};case"blue":return function(t){return""+t+t+"ff"}}}(),function(t){var a,i;return i=255-Math.round(255*(t-e)/(r-e)),a=i.toString(16).split(".")[0],1===a.length&&(a=0+a),n(a)}},n=function(e,n){var a,i,o;return i=function(r){return h.find(e).each(function(){var e;return e=t(this).data("value"),null!=e&&isFinite(e)?r(e,t(this)):void 0})},o=[],i(function(t){return o.push(t)}),a=r(n,Math.min.apply(Math,o),Math.max.apply(Math,o)),i(function(t,e){return e.css("background-color","#"+a(t))})},e){case"heatmap":n(".pvtVal","red");break;case"rowheatmap":for(a=l=0;s>=0?s>l:l>s;a=s>=0?++l:--l)n(".pvtVal.row"+a,"red");break;case"colheatmap":for(i=u=0;o>=0?o>u:u>o;i=o>=0?++u:--u)n(".pvtVal.col"+i,"red")}return n(".pvtTotal.rowTotal","red"),n(".pvtTotal.colTotal","red"),this},t.fn.barchart=function(){var e,r,n,a,i,o,s=this;for(o=this.data("dimensions"),a=o[0],n=o[1],e=function(e){var r,n,a,i;return r=function(r){return s.find(e).each(function(){var e;return e=t(this).data("value"),null!=e&&isFinite(e)?r(e,t(this)):void 0})},i=[],r(function(t){return i.push(t)}),n=Math.max.apply(Math,i),a=function(t){return 100*t/(1.4*n)},r(function(e,r){var n,i;return n=r.text(),i=t("<div>").css({position:"relative",height:"55px"}),i.append(t("<div>").css({position:"absolute",bottom:0,left:0,right:0,height:a(e)+"%","background-color":"gray"})),i.append(t("<div>").text(n).css({position:"relative","padding-left":"5px","padding-right":"5px"})),r.css({padding:0,"padding-top":"5px","text-align":"center"}).html(i)})},r=i=0;a>=0?a>i:i>a;r=a>=0?++i:--i)e(".pvtVal.row"+r);return e(".pvtTotal.colTotal"),this}}.call(this),function(){var t,e,r,n,a=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},i={}.hasOwnProperty;t=jQuery,r=window.PivotTable,n=r.i18n.t,e=r.decorators,e.bootstrap={pivotTable:function(){return this.addClass("table table-bordered pvt-table-bt"),this},pivotUITable:function(){return this.addClass("pvt-ui-table-bt"),this},createRendererSelector:function(e,r){var a,i,o,s,l;for(i=t("<td colspan='1' class='pvt-axis-container-bt' align='center'>"),a=t("<select id='renderer' class='renderer-sel-bt'>"),i.append(a),s=0,l=e.length;l>s;s++)o=e[s],a.append(t("<option value='"+o+"'>"+n(o)+"</option>"));return this.append(t("<tr>").append(i)),a.on("change",function(){return a.data("selected",t(this).val()),r()}),a},createColList:function(e,r,o,s){var l,u,c,h,p;for(c=u=t("<td colspan='1' id='unused' class='pvtHorizList pvtAxisContainer'>"),h=0,p=e.length;p>h;h++)l=e[h],a.call(r,l)<0&&function(e){var r,a,l,u,h,p,d,f,g,v,m;if(u=function(){var t,r;t=o[e],r=[];for(l in t)i.call(t,l)&&(d=t[l],r.push(l));return r}(),p=u.length,r=t("    \n <div class='btn-group data-label' id='axis_"+e.replace(/\s/g,"")+"'>\n     <span class='btn handle'>"+e+'</span>\n     <button class="btn dropdown-toggle" data-toggle="dropdown">\n         <span class="icon-filter"></span>\n     </button>\n </div>\n').data("name",e),f=t("<ul class='dropdown-menu'>"),f.append(t("<li>").text(n("values for axis",p,e))),f.append("<li class='divider'></li>"),p>20)f.append(t("<li>").text(n("(too many to list)")));else for(h=t("<li>"),h.append(t("<button class='btn btn-mini'>").text(n("Select All")).bind("click",function(){return f.find("input").attr("checked",!0)})),h.append(t("<button class='btn btn-mini'>").text(n("Select None")).bind("click",function(){return f.find("input").attr("checked",!1)})),f.append(h),f.append("<li class='divider'></li>"),m=u.sort(),g=0,v=m.length;v>g;g++)l=m[g],d=o[e][l],a=t("<label>"),a.append(t("<input type='checkbox' class='pvtFilter'>").attr("checked",!0).data("filter",[e,l])),a.append(t("<span>").text(""+l+" ("+d+")")),f.append(t("<li>").append(a));return t("li",f).click(function(){return event.stopPropagation()}),r.find(".dropdown-toggle").on("click.filter",function(){return t(document).one("click.filter",function(){return console.log("click"),s()})}),c.append(r.append(f))}(l);return this.find("tr:first").append(u),c},createAggregatorMenu:function(e,r){var a,o;a=t("<select id='aggregator'>").css("margin-bottom","5px");for(o in e)i.call(e,o)&&a.append(t("<option>").val(o).text(n("aggregator."+o)));return a.bind("change",r),a},initialUI:function(){var e,r,n,a,i,o,s,l,u,c;for(l=this.cols,r=0,i=l.length;i>r;r++)e=l[r],t("#cols").append(t("#axis_"+e.replace(/\s/g,"")));for(u=this.rows,n=0,o=u.length;o>n;n++)e=u[n],t("#rows").append(t("#axis_"+e.replace(/\s/g,"")));for(c=this.vals,a=0,s=c.length;s>a;a++)e=c[a],t("#vals").append(t("#axis_"+e.replace(/\s/g,"")));return null!=this.aggregatorName&&t("#aggregator").val(opts.aggregatorName),null!=this.rendererName?t("#renderer").val(this.rendererName).trigger("change"):void 0},afterCreated:function(){var e,r,n,a,i,o;n=t(".pvtTable"),a=this,e={".pvtColLabel":"pvt-col-label-bt",".pvtTotalLabel":"pvt-total-label-bt",".pvtTotal":"pvt-total-bt",".pvtGrandTotal":"pvt-grand-total-bt",".pvtAxisContainer":"pvt-axis-container-bt",".pvtHorizList":"pvt-horiz-list-bt"};for(r in e)o=e[r],a.find(r).addClass(o);return i=function(){return t("#rows, #cols, #vals").find(".btn-group > .btn").addClass("btn-info").find(".icon-filter").addClass("icon-white"),t("#unused").find(".btn-group > .btn").removeClass("btn-info").find(".icon-filter").removeClass("icon-white")},t(".pvtAxisContainer").sortable().on("sortstop",i),i()}}}.call(this),function(){var t,e,r,n,a=[].indexOf||function(t){for(var e=0,r=this.length;r>e;e++)if(e in this&&this[e]===t)return e;return-1},i={}.hasOwnProperty;t=jQuery,r=window.PivotTable,n=r.i18n.t,e=r.decorators,e["jquery-ui"]={pivotTable:function(){return this.addClass("pvt-table-ju"),this},pivotUITable:function(){return this.addClass("pvt-ui-table-ju"),this},createRendererSelector:function(e,r){var a,i,o,s,l,u;for(a=t("<td colspan='2' align='center'>"),i=t("<form>").addClass("form-inline"),a.append(i),i.append(t("<strong>").text(n("Effects:"))),l=0,u=e.length;u>l;l++)s=e[l],o=t("<input type='radio' name='renderers' id='renderers_"+s.replace(/\s/g,"")+"'>").css({"margin-left":"15px","margin-right":"5px"}).val(s),"None"===s&&o.attr("checked","checked"),i.append(o).append(t("<label class='checkbox inline' for='renderers_"+s.replace(/\s/g,"")+"'>").text(n(s)));return this.append(t("<tr>").append(a)),t("input[name=renderers]",i).bind("change",function(){return i.data("selected",t(this).val()),r()}),i},createColList:function(e,r,o,s){var l,u,c,h;for(u=t("<td colspan='2' id='unused' class='pvtAxisContainer pvtHorizList'>"),c=0,h=e.length;h>c;c++)l=e[c],a.call(r,l)<0&&function(e){var r,a,l,c,h,p,d,f,g,v,m;if(h=function(){var t,r;t=o[e],r=[];for(c in t)i.call(t,c)&&(d=t[c],r.push(c));return r}(),p=h.length,a=t("<nobr class='handle'>").text(e),f=t("<div>").css({"z-index":100,width:"280px",height:"350px",overflow:"scroll",border:"1px solid gray",background:"white",display:"none",position:"absolute",padding:"20px"}),f.append(t("<strong>").text(n("values for axis",p,e))),p>20)f.append(t("<p>").text(n("(too many to list)")));else for(r=t("<p>"),r.append(t("<button>").text(n("Select All")).bind("click",function(){return f.find("input").attr("checked",!0)})),r.append(t("<button>").text(n("Select None")).bind("click",function(){return f.find("input").attr("checked",!1)})),f.append(r),m=h.sort(),g=0,v=m.length;v>g;g++)c=m[g],d=o[e][c],l=t("<label>"),l.append(t("<input type='checkbox' class='pvtFilter'>").attr("checked",!0).data("filter",[e,c])),l.append(t("<span>").text(""+c+" ("+d+")")),f.append(t("<p>").append(l));return a.bind("dblclick",function(e){return f.css({left:e.pageX,top:e.pageY}).toggle(),f.bind("click",function(t){return t.stopPropagation()}),t(document).one("click",function(){return s(),f.toggle()})}),u.append(t("<li class='data-label' id='axis_"+e.replace(/\s/g,"")+"'>").data("name",e).append(a).append(f))}(l);return this.append(t("<tr>").append(u)),u},createAggregatorMenu:function(e,r){var a,o;a=t("<select id='aggregator'>").css("margin-bottom","5px");for(o in e)i.call(e,o)&&a.append(t("<option>").val(o).text(n("aggregator."+o)));return a.bind("change",r),a},initialUI:function(){var e,r,n,a,i,o,s,l,u,c;for(l=this.cols,r=0,i=l.length;i>r;r++)e=l[r],t("#cols").append(t("#axis_"+e.replace(/\s/g,"")));for(u=this.rows,n=0,o=u.length;o>n;n++)e=u[n],t("#rows").append(t("#axis_"+e.replace(/\s/g,"")));for(c=this.vals,a=0,s=c.length;s>a;a++)e=c[a],t("#vals").append(t("#axis_"+e.replace(/\s/g,"")));return null!=this.aggregatorName&&t("#aggregator").val(opts.aggregatorName),null!=this.rendererName?t("#renderers_"+this.rendererName.replace(/\s/g,"")).attr("checked",!0).trigger("change"):void 0},afterCreated:function(){var e,r,n,a,i,o;n=t(".pvtTable"),a=this,e={".pvtColLabel":"pvt-col-label-ju",".pvtTotalLabel":"pvt-total-label-ju",".pvtTotal":"pvt-total-ju",".pvtGrandTotal":"pvt-grand-total-ju",".pvtAxisContainer":"pvt-axis-container-ju",".pvtHorizList":"pvt-horiz-list-ju"},o=[];for(r in e)i=e[r],o.push(a.find(r).addClass(i));return o}}}.call(this),function(){var t,e,r,n,a,i,o,s;t=jQuery,n=window.PivotTable,a=n.i18n.t,e=window.btoa||window.base64.encode,s="data:application/vnd.ms-excel;base64,",i='<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>',o=function(t){return e(unescape(encodeURIComponent(t)))},r=function(t,e){return t.replace(/{(\w+)}/g,function(t,r){return e[r]})},n.plugins.exportToExcel=function(e,n){var l,u,c;return u={sheetName:"WorkSheet",container:null},t.extend(u,n),t(".btn-export-to-excel").remove(),null!=e&&"TABLE"===(null!=(c=e[0])?c.tagName:void 0)?(null==u.container&&(u.container=t("#cols")),l=t("<a class='pull-right btn-export-to-excel' style='line-height:30px' href='#'>"+a("Export")+" <i class='icon-share'></i></button>").on("click",function(){var t;return t={worksheet:u.sheetName,table:e.html()},window.location.href=s+o(r(i,t))}),u.container.append(l)):void 0}}.call(this),function(){var t,e;t=jQuery,e=window.PivotTable,e.plugins.fixedTableHeader=function(t,e){var r;return null!=t&&"TABLE"===(null!=(r=t[0])?r.tagName:void 0)?t.fixedTableHeaderPro(e):void 0}}.call(this),function(){var t;t=jQuery,null==t.browser&&(t.browser={mozilla:/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),webkit:/webkit/.test(navigator.userAgent.toLowerCase()),opera:/opera/.test(navigator.userAgent.toLowerCase()),msie:/msie/.test(navigator.userAgent.toLowerCase())}),t.fn.fixedTableHeaderPro=function(e){var r,n,a;return r={width:"100%",height:"100%",fixedCol:!1,fixedFooter:!1,cloneEvents:!1},n={_colSpanInRow:function(t,e){var r;return null==e&&(e="td"),r=0,t.find(e).each(function(){return r+=this.colSpan}),r},_cellWidth:function(e){var r,n;return n=e.width(),r=parseInt(e.css("border-width"))||1,t.browser.mozilla?n:t.browser.chrome?n+r:t.browser.msie?n+r+r/2:void 0},_eleWidth:function(e){var r,n;return n=e.width(),r=e.outerWidth(),t.browser.mozilla?r:r},_scrollBarWidth:function(){var t;return document.body.style.overflow="hidden",t=document.body.clientWidth,document.body.style.overflow="scroll",t-=document.body.clientWidth,t||(t=document.body.offsetWidth-document.body.clientWidth),document.body.style.overflow="",t},destroy:function(){var t;return t=this.parents(".fthp-wrapper-main"),t.size()>0?(t.parent().append(this),t.remove()):void 0},create:function(e,r){var n,a,i,o,s,l,u,c,h,p,d,f,g,v,m,b,w,x,y,A,C;return p=this,this.destroy.apply(e),b=e.width(),f=e.height(),v=e.outerWidth(!0),g=e.outerHeight(!0),d=this._eleWidth(e),h=this._scrollBarWidth(),t.isNumeric(r.width)&&(r.width=parseInt(r.width),r.width>v&&(r.width=v+h)),t.isNumeric(r.height)&&(r.height=parseInt(r.height),r.height>g&&(r.height=g+h)),e.width(d).height(f),a={overflow:"hidden",margin:"0px",padding:"0px","border-width":"0px"},w=t("<div class='fthp-wrapper-main'>").css(t.extend({},a,{position:"relative"})).width(r.width).height(r.height),u=e.parent(),w.append(C=t("<div class='fthp-wrapper-table'>").append(e).css(t.extend({},a,{overflow:"scroll",width:r.width,height:r.height,position:"relative","z-index":"35"})).on("scroll",function(){var e;return e=t(this),A.scrollLeft(e.scrollLeft()),"undefined"!=typeof x&&null!==x?x.scrollTop(e.scrollTop()):void 0})),u.append(w),s=e.clone(r.cloneEvents,r.cloneEvents),s.addClass("fthp-header").height("auto"),s.find("tbody, tfoot").empty(),m=e.find("thead th"),s.find("thead th").attr("id",null).each(function(e){var r,n;return r=m.eq(e),n=p._cellWidth(r),t(this).width(n).css("minWidth",r.width()).css("maxWidth",n)}),w.append(A=t("<div class='fthp-wrapper-row'>").append(s).css(t.extend({},a,{width:r.width-h,position:"relative","z-index":"45"}))),r.fixedCol&&(i=e.clone(r.cloneEvents,r.cloneEvents),i.addClass("fthp-columns").width("auto"),m=e.find("th"),i.find("th").attr("id",null).each(function(e){var r,n;return r=m.eq(e),n=p._cellWidth(r),t(this).width(n).css("minWidth",r.width()).css("maxWidth",n)}),i.find("td").remove(),l=this._colSpanInRow(i.find("tbody tr:first"),"th"),c=[],i.find("thead tr").each(function(){var e,r,n,a,i;for(r=0,t("th",this).each(function(){var e,n,a;for(n=0,a=c.length;a>n;n++)e=c[n],e[0]>0&&(r+=e[1]);return r+=this.colSpan,this.rowSpan>1&&c.push([this.rowSpan,this.colSpan]),r>=l?(t(this).nextAll().remove(),!1):void 0}),i=[],n=0,a=c.length;a>n;n++)e=c[n],e[0]>0&&i.push(e[0]--);return i}),o=i.clone(r.cloneEvents,r.cloneEvents),o.removeClass("fthp-columns").addClass("fthp-corner").width("auto").height("auto"),o.find("tbody tr, tfoot tr").remove(),w.append(x=t("<div class='fthp-wrapper-col'>").append(i).css(t.extend({},a,{height:r.height-h,position:"relative","z-index":"40"}))),w.append(y=t("<div class='fthp-wrapper-corner'>").append(o).css(t.extend({},a,{position:"relative","z-index":"50"})))),n=parseInt(i.find("th:first").css("border-width"))||1,null!=x&&x.width(i.width()+2*n),null!=y&&y.width(o.width()+2*n).height(o.height()+2*n),s.css("maxWidth",b).width(b),w.children().offset(w.offset())}},"string"==typeof e&&null!=n[e]?n[e].apply(this):"object"==typeof e&&e.constructor===Object?(a=t.extend(r,e),n.create(this,a)):console.log("Error: "+e+" is not a valid argument!"),this}}.call(this),function(){var t,e,r;t=jQuery,r=window.PivotTable,e=r.i18n,e.en={"values for axis":function(t){return""+t[0]+" values for "+t[1]},"aggregator.count":"count","aggregator.countUnique":"countUnique","aggregator.listUnique":"listUnique","aggregator.intSum":"intSum","aggregator.sum":"Sum","aggregator.average":"average","aggregator.sumOverSum":"sumOverSum","aggregator.ub80":"ub80","aggregator.lb80":"lb80","charts title":function(t){return null==t[0]?t[1]:null==t[1]?t[0]:""+t[0]+" by "+t[1]}},e.zh=e["zh-CN"]={"Row Barchart":"行内柱状图",Heatmap:"热点表","Row Heatmap":"行热点表","Col Heatmap":"列热点表","null":"空值",Totals:"合计",None:"无","Select None":"清除选择","Select All":"选择全部","Effects:":"特效:","Fields:":"字段:","(too many to list)":"(列表太长)","values for axis":function(t){return"共 "+t[0]+" 类 "+t[1]},"aggregator.count":"计数","aggregator.countUnique":"非重复值计数","aggregator.listUnique":"单行显示非重复值","aggregator.intSum":"累加(取整)","aggregator.sum":"累加","aggregator.average":"平均值","aggregator.sumOverSum":"累加并求比例","aggregator.ub80":"累加并求比例2","aggregator.lb80":"累加并求比例3","charts title":function(t){return null==t[0]?t[1]:null==t[1]?t[0]:""+t[1]+" 之 "+t[0]},"Line chart":"折线图","Bar chart":"柱状图","Area chart":"面积图"}}.call(this),function(){var t,e,r,n,a,i,o,s;t=jQuery,i=window.PivotTable,o=i.renderers,s=i.i18n.t,r=function(e,r){var n,a,i,o,l,u,c,h,p,d,f,g,v,m,b,w,x,y,A,C;for(b=t(window).width()/1.2,f=t(window).height()/1.4,w=t("<div class='pvt-table-chart'>").width(b).height(f),r.empty().append(w),v=pivotData.getRowKeys(),0===v.length&&v.push([]),i=pivotData.getColKeys(),0===i.length&&i.push([]),d=function(){var t,e,r;for(r=[],t=0,e=v.length;e>t;t++)h=v[t],r.push(h.join("-"));return r}(),l=[],x=0,A=i.length;A>x;x++){for(a=i[x],u={},u.name=a.join("-"),o=[],y=0,C=v.length;C>y;y++)g=v[y],n=pivotData.getAggregator(g,a),null!=n.value()?o.push(n.value()):o.push(0);u.data=o,l.push(u)}return p=pivotData.colVars.join("-"),c=pivotData.rowVars.join("-"),m=s("charts title",p,c),{wrapper:w,xCategories:d,dataArray:l,title:m,yTitle:p,xTitle:c}},n=function(e,n,a,i){var o,s,l,u,c,h,p;for(s=r(e,n),u=[],p=s.dataArray,c=0,h=p.length;h>c;c++)o=p[c],u.push(o.name),o.type="area"===a?"line":a,o.itemStyle={normal:{}},"area"===a?o.itemStyle.normal.areaStyle={type:"default"}:o.itemStyle.normal.lineStyle={width:2};return l={animationDuration:1500,title:{text:s.title,x:"center"},tooltip:{trigger:"item"},legend:{data:u,orient:"vertical",x:"right",y:80},toolbox:{show:!0,feature:{mark:!0,dataView:{readOnly:!0},saveAsImage:!0}},calculable:!0,xAxis:{name:"子",type:"category",boundaryGap:"bar"===a,data:s.xCategories,axisLabel:{interval:"auto"}},yAxis:{type:"value",name:s.yTitle,splitArea:{show:!0}},series:s.dataArray},t.extend(l,i),require(["echarts/echarts"],function(t){var e;
return e=t.init(s.wrapper[0]),e.setOption(l)}),s.wrapper},a=function(e,n,a,i){var o,s;return"bar"===a&&(a="column"),o=r(e,n),s={chart:{type:a},title:{text:o.title},xAxis:{categories:o.xCategories,title:{text:o.xTitle}},yAxis:{title:{text:null}},legend:{align:"right",layout:"vertical",verticalAlign:"top",y:50,padding:10,itemStyle:{lineHeight:"20px",padding:"5px"}},credits:{enabled:!1},series:o.dataArray},t.extend(s,i),o.wrapper.highcharts(s),o.wrapper},e=null!=t.fn.highcharts?a:n,t.extend(o,{"Line chart":function(t,r){return e(t,r,"line")},"Bar chart":function(t,r){return e(t,r,"bar")},"Area chart":function(t,r){return e(t,r,"area")}})}.call(this);